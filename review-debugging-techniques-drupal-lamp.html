<!DOCTYPE html>
<html lang="en"> 

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>How to Debug Drupal and LAMP | Adelle Frank</title>
  
<link rel="shortcut icon" href="ico/favicon.ico"  />
  <link rel="stylesheet" media="all" href="css/css_6fb95d3684ef88a42b1ec6fe56ca5ccc.css" />
  <link rel="stylesheet" media="all" href="css/grid16-960d956.css?o"/>
  <!--[if IE]>
   <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->  
  <!--[if IE 8]>
  <link rel="stylesheet" media="all" href="/sites/all/themes/fusion/fusion_core/css/ie8-fixes.css?o" />
  <![endif]-->
  <!--[if IE 7]>
  <link rel="stylesheet" media="all" href="/sites/all/themes/fusion/fusion_core/css/ie7-fixes.css?o" />
  <![endif]-->
  <!--[if lte IE 6]>
  <link rel="stylesheet" media="all" href="/sites/all/themes/fusion/fusion_core/css/ie6-fixes.css?o"/>
<link rel="stylesheet" media="all" href="/sites/all/themes/adelle/css/ie6-fixes.css?o"/>
  <![endif]-->
    <script src="js/js_a6373110aea2a7a54ab24e569f35f9f2.js"></script>
<script>
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/" });
//--><!]]>
</script>
</head>

<body id="pid-blog-review-debugging-techniques-drupal-lamp" class="not-front not-logged-in page-node node-type-blog no-sidebars full-node layout-main sidebars-split font-size-12 grid-type-960 grid-width-16">
  <div id="page" class="page">
    <div id="page-inner" class="page-inner">
      <div id="skip" role="navigation">
        <a href="#main-content-area">Skip to Main Content Area</a>
      </div>

      <!-- header-top row: width = grid_width -->
      
      <!-- header-group row: width = grid_width -->
      <div id="header-group-wrapper" class="header-group-wrapper full-width" role="banner">
        <div id="header-group" class="header-group row grid16-16">
          <div id="header-group-inner" class="header-group-inner inner clearfix">
                        
                        <div id="header-site-info" class="header-site-info block">
              <div id="header-site-info-inner" class="header-site-info-inner inner">
                                <div id="logo">
                  <a href="index.html" title="Home"><img src="png/logo.png" alt="Home" /></a>
                </div>
                                                <div id="site-name-wrapper" class="clearfix">
                                    <span id="site-name"><a href="index.html" title="Home">Adelle Frank</a></span>
                                                      <span id="slogan">Drupal, genealogy, accessibility, and religion archives geek in Atlanta, Georgia</span>
                                  </div><!-- /site-name-wrapper -->
                              </div><!-- /header-site-info-inner -->
            </div><!-- /header-site-info -->
            
            
<div role="navigation" id="block-menu-menu-about" class="block block-menu odd first grid16-2 fusion-right fusion-multicol-menu clearfix">
  <div class="inner clearfix">
            <div class="content clearfix">
      <ul class="menu"><li class="expanded first last"><a href="about.html" title="About">ABOUT</a><ul class="menu"><li class="leaf first"><a href="me.html" title="About Adelle">Adelle</a></li>
<li class="leaf"><a href="surnames.html" title="">Surnames</a></li>
<li class="leaf last"><a href="site.html" title="About this Site">This Site</a></li>
</ul></li>
</ul>    </div>
  </div><!-- /block-inner -->
</div><!-- /block -->

<div role="navigation" id="block-menu-menu-topics" class="block block-menu even  last grid16-2 fusion-right fusion-multicol-menu clearfix">
  <div class="inner clearfix">
            <div class="content clearfix">
      <ul class="menu"><li class="expanded first last"><a href="rss.html" title="Blog Topics">TOPICS</a><ul class="menu"><li class="leaf first"><a href="genealogy.html" title="Family history thoughts and notes.">Genealogy</a></li>
<li class="leaf"><a href="libraries.html" title="Blog posts on topics of interest to those in the library and information science professions.">Libraries</a></li>
<li class="leaf"><a href="drupal.html" title="Only the most wonderful web content management system in the universe!">Drupal</a></li>
<li class="leaf"><a href="web.html" title="Blog posts about web design &amp; development.">The Web</a></li>
<li class="leaf"><a href="daily-life.html" title="Blog posts related to the home and gardening.">Daily Life</a></li>
<li class="leaf last"><a href="politics.html" title="Blog posts about politics and elections.">Politics</a></li>
</ul></li>
</ul>    </div>
  </div><!-- /block-inner -->
</div><!-- /block -->
                      </div><!-- /header-group-inner -->
        </div><!-- /header-group -->
      </div><!-- /header-group-wrapper -->

      <!-- preface-top row: width = grid_width -->
      
      <!-- main row: width = grid_width -->
      <div id="main-wrapper" class="main-wrapper full-width">
        <div id="main" class="main row grid16-16">
          <div id="main-inner" class="main-inner inner clearfix">
            
            <!-- main group: width = grid_width - sidebar_first_width -->
            <div id="main-group" class="main-group row nested grid16-16">
              <div id="main-group-inner" class="main-group-inner inner">
                
                <div id="main-content" class="main-content row nested">
                  <div id="main-content-inner" class="main-content-inner inner">
                    <!-- content group: width = grid_width - (sidebar_first_width + sidebar_last_width) -->
                    <div id="content-group" class="content-group row nested grid16-16">
                      <div id="content-group-inner" class="content-group-inner inner">
                        
                        
                        <div id="content-region" class="content-region row nested">
                          <div id="content-region-inner" class="content-region-inner inner">
                            <a name="main-content-area" id="main-content-area"></a>
                                                        <div id="content-inner" class="content-inner block">
                              <div id="content-inner-inner" class="content-inner-inner inner">   
                                                                <div id="content-content" class="content-content" role="main">
                                  
<div id="node-338" class="node odd full-node node-type-blog">

  <div class="inner">

    
    
    <div class="meta">

      <div class="submitted">
      
        <div class="day">
           2        </div>
        <div class="month">
           Oct        </div>
        <div class="year">
           2011        </div>
      
      </div>


        
        <div class="terms">

          <ul class="links inline"><li class="taxonomy_term_33 first last"><a href="drupal.html" rel="tag" title="Posts about the most wonderful web content management system in the universe.">drupal</a></li>
</ul>
        </div>

             

   </div>
   
       

 
 
    <h1 class="title">How to Debug Drupal and LAMP</h1>
    
                               
    


    <div class="content clearfix">

      <p><a href="http://drupalcampatlanta.com/" title="Conference Web site"><img src="png/medium_drupalcamp-atl-logo-peach.png" alt="Atlanta Drupal Users Group logo" title="Atlanta Drupal Users Group logo" width="93" height="120"></a> Using a more
                <em>scientific method </em>&amp; <em>customer-centric</em> approach to debugging
            Drupal, rather than randomly trying things, will greatly increase your productivity. </p><p>This <a href="http://drupalcampatlanta.com/session/debugging-techniques-drupal-and-lamp" title="Session description">presentation</a> was given by Robert Ristroph at <a href="http://drupalcampatlanta.com/">DrupalCamp Atlanta 2011</a>.</p><p>Equally importantly, Rob gives
            specific tips and tools for debugging common problems in the different parts of a Drupal
            installation.</p><p>If my notes in
            this post are not enough, you can also<a href="http://www.archive.org/details/Drupal_Camp_Colorado_2011__Debugging_Techniques_for_Drupal_and_LAMP"> watch a video of Rob's similar presentation in June</a> at the Colorado
            DrupalCamp.</p><p></p>
        <ul id="toc">
            <li>General Tips<ul><li><a href="#important">Why Debugging is Important</a></li><li><a href="#scientific">Scientific Method Approach</a></li><li><a href="#customers">Customers</a></li></ul></li>
            
            
            <li>Drupal Tips<ul><li><a href="#cheap">Cheap Tests</a></li><li><a href="#common">Common Bugs</a></li><li><a href="#general">General Inspection</a></li><li><a href="#database">Database Inspection</a></li><li><a href="#devel">Devel Module</a></li><li><a href="#theme">Theme Tips</a></li><li><a href="#performance">Performance Tips</a></li><li><a href="#interaction">Interaction Tips</a></li></ul></li>
            
            
            
            
            
            
            
        </ul>
        <p>For further reading, Rob highly recommends&nbsp;<a href="http://www.debuggingrules.com/" target="_blank" title="http://www.debuggingrules.com">http://www.debuggingrules.com</a> (David Agans)</p><p>
        <a id="important"></a></p>
        <h2>Why Debugging is important</h2><ul>
            <li>You'll spend more of your life is debugging than coding (Maurice Wilkes quote)</li>
            <li><em>Debugging</em>=a PROCESS that increases productivity</li>
            <li><em>Debugging</em>=developing an understanding of a coding error, so that the
                behavior of the code and your expectations of it match.</li>
            <li><em>Bug</em>=mismatch between programmer's (YOUR) mental model of what code should
                do &amp; what it does. You gave wrong instructions.</li>
            <li>This reinforces the Erik Webb's emphasis in "Thinking like a Drupal Developer" that
                one must THINK through architecture &amp; function before coding! </li>
        </ul><p>
        <a id="scientific"></a></p>
        <h2>Scientific Method Approach</h2><p>Since a bug is a <strong>model </strong>vs
                <strong>reality </strong><em>mismatch</em>, think of your model as a hypothesis that
            needs tested. The scientific method gives a great way to structure your debugging! Steps
            in scientific method include: Hypothesize, Test, Refine &amp; Repeat.&nbsp; For
            debugging in Drupal that looks like:</p><ol>
            <li>Gather initial info<ol>
                    <li>from customers</li>
                    <li>Learn location of all logs, look at lesser known (mysql); watchdog/syslog
                        (logs, screenshots).</li>
                </ol></li>
            <li>Make an EASY-to-Test hypothesis (may narrow down where problem is located: Divide
                &amp; conquer)</li>
            <li>Test it, Analyze it</li>
            <li>Refine hypothesis &amp; go back to Step 2</li>
            </ol><p>
        <a id="customers"></a></p>
        <h2>Customers</h2><ul>
            <li>Valuable debugging info comes from CUSTOMERS, so teach users how to do good bug
                reports &amp; take screen shots. </li>
            <li>Because you can't DeBug unless you can replicate the bug; the relationship with
                users/customers is key.</li>
        </ul><p>
        <a id="cheap"></a></p>
        <h2>Cheap Tests (try first)</h2><ol>
            <li>Clear all caches (browser, drupal, varnish, etc)</li>
            <li>Do you have the right version of code is on server?</li>
            <li>Change to garland (eliminate custom theme as problem)</li>
            <li>Check for old css/js being delivered from a CDN </li>
            <li>Remember your own dumb mistakes &amp; check (i.e. is it plugged in?) </li>
            <li>Did someone else already solve it? <ul>
                    <li>Search for the EXACT error message (except for node numbers, domain name,
                        etc.)</li>
                    <li>ask on #drupal-support</li>
                    <li>Try dev version of modules (be sure can undo)</li>
                    <li>Always post to describe your issue &amp; to confirm when/how fixed</li>
                </ul></li>
        </ol><p>
        <a id="common"></a></p>
        <h2>Common Bugs</h2><p><em>List-checking for cheap and common bugs can't replace
                THINKING!</em></p><ol>
            <li>Permissions on input filter</li>
            <li>Rebuild node_access table</li>
            <li>Permissions on imagecache and aggregated js/css files (whole /files) </li>
            <li>Content Permissions is giving access to some CCK fields and not others </li>
            <li>Cron related (cron_semaphore)</li>
            <li>Keep your own list (perhaps per project)</li>
                </ol><p>
        <a id="general"></a></p>
        <h2>Inspection Tips (General)</h2><p><em>Goal: to see behind the curtain/inside the
                system</em></p><ol>
            <li>krumo/<a href="http://drupal.org/project/devel">devel module</a>
            </li>
            <li>PRIMITIVE print method (print out indiv variables for checking, can't do with giant
                            objects)<br><blockquote><p><code>&nbsp;
                            print("&lt;pre&gt;".$stuff."&lt;/pre&gt;");</code><code>&nbsp;
                            <br>&nbsp;
                            print("&lt;pre&gt;".print_r($stuff,TRUE)."&lt;/pre&gt;");</code></p></blockquote></li>
            <li>use watchdog() for values on pages that refresh or are in a cron hook </li>
            <li>Fancy tools (<a href="https://drupal.org/node/1032194">xdebug</a>/<a href="http://en.wikipedia.org/wiki/Breakpoint" title="Wikipedia definition">breakpoints</a>/<a href="http://en.wikipedia.org/wiki/Tracing_(software)">code tracing</a>)=good, but don't replace learning how to think/debug<ul>
                    <li>Comment in session: if you enable xdebug in PHP, you get better error
                        reporting, but there are performance/security issues with doing this in
                        production</li>
                    <li>RECOMMENDATION: the <a href="http://drupal.org/project/quickstart">QuickStart project</a>, a pre-made development environment for
                        Drupal</li>
                </ul></li>
            <li>Use standard debugging tools/setup in your shop, so everyone's on same page (IDE
                ideas: vi or emacs, then use tool with xdebug integrated when needed, others use
                eclipse or netbeans)</li>
                </ol><p>
        <a id="database"></a></p>
        <h2>Inspection Tips (Database)</h2><ol>
            <li>ALWAYS keep a copy of the database in original state, do experiments, compare
                (diff), and then RESTORE to original state.</li>
            <li>Having an original/starting point database copy can be key to replicating
                problems</li>
            <li>Use drush to dump variables to files, then diff (compare)</li>
            <li>Try not to end up blindly scanning the differences; develop hypothesis/guess/theory
                and look for that specifically</li>
        </ol><p>
        <a id="devel"></a></p>
        <h2>Devel Module</h2><p>yoursite.com/devel/php as a way to do quick tests - check if a
            PHP extension is installed; or <br>unserialize a cut-and-paste from the db; test code
            snippets for expected behavior [beware security risk]<br>1. node access/ permissions
            block for debugging<br>2. user switcher for recreating problems (have a test user for
            every role)<br>3. look at query list<br>4. devel features are a kind of "common
            problems" list</p><p>
        <a id="theme"></a></p>
        <h2>Theme Debugging Tips</h2><ol>
            <li>devel module themer module</li>
            <li>limits on number of CSS files - IE especially [make sure CSS aggregation is on]</li>
            <li>hook_form_alter() vs. hook_form_FORMID_alter() and module weights</li>
            <li>typography and even color profiles in images are handled differently in different
                browsers/platforms </li>
            <li>Firebug plugin for Firefox</li>
            </ol><p>
        <a id="performance"></a></p>
        <h2>Performance Debugging Tips</h2><ol>
            <li>learn how to use "ab" (apache bench)</li>
            <li>wget (-r) spiders</li>
            <li>mysql logs &amp; innotop [like printing out variables]</li>
            <li>cool trick: put a header indicating a cache hit or miss, that you can look for with
                the LiveHTTPHeaders Firefox installation</li>
            <li>Use of xhprof &amp; similar needs to be targeted at a problem</li>
        </ol><p>
        <a id="interaction"></a></p>
        <h2>Interaction Debugging Tips</h2><p><em>Are hardest to diagnose, they resist
                compartmentalization (divide/conquer), because they involve 2 bug-free components
                interacting</em></p><ol>
            <li>Module weights, order of hook operations [systematically disable modules]</li>
            <li>Theme/Module interaction</li>
            <li>External service requests</li>
            <li>Mis-use of APIs</li>
        </ol>
    </div>


  </div><!-- /inner -->



  
</div><!-- /node-338 -->

                                                                  </div><!-- /content-content -->
                                                              </div><!-- /content-inner-inner -->
                            </div><!-- /content-inner -->
                          </div><!-- /content-region-inner -->
                        </div><!-- /content-region -->

                                              </div><!-- /content-group-inner -->
                    </div><!-- /content-group -->

                                      </div><!-- /main-content-inner -->
                </div><!-- /main-content -->

                              </div><!-- /main-group-inner -->
            </div><!-- /main-group -->
          </div><!-- /main-inner -->
        </div><!-- /main -->
      </div><!-- /main-wrapper -->

      <!-- postscript-bottom row: width = grid_width -->
      
      <!-- footer row: width = grid_width -->
      
      <!-- footer-message row: width = grid_width -->
      <div id="footer-message-wrapper" class="footer-message-wrapper full-width">
        <div id="footer-message" class="footer-message row grid16-16">
          <div id="footer-message-inner" class="footer-message-inner inner clearfix" role="contentinfo">
            <div id="footer-message-text" class="footer-message-text block">
<div id="footer-message-text-inner" class="footer-message-text-inner inner clearfix">
&copy; Adelle Frank, All rights reserved unless otherwise specified.</div><!-- /footer-message-text-inner -->
</div><!-- /footer-message-text -->
          </div><!-- /footer-message-inner -->
        </div><!-- /footer-message -->
      </div><!-- /footer-message-wrapper -->

    </div><!-- /page-inner -->
  </div><!-- /page -->
  </body>
</html>
